<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <script src="index.js"></script> -->
    <link rel="stylesheet" href="index.css" />
    <title>Js | Major Elective 2</title>
  </head>

  <body>
    <div class="mainContainer" for="group">
      <h6 id="title">TIC-TAC-TOE</h6>
      <!-- ROW 01 -->
      <div for="parent" class="parent">
        <div class="child">
          <label class="mark" id="1"></label>
        </div>

        <div class="child">
          <label class="mark" id="2"></label>
        </div>

        <div class="child">
          <label class="mark" id="3"></label>
        </div>
      </div>

      <!-- ROW 02 -->
      <div for="parent" class="parent">
        <div class="child">
          <label class="mark" id="4"></label>
        </div>
        <div class="child">
          <label class="mark" id="5"></label>
        </div>
        <div class="child">
          <label class="mark" id="6"></label>
        </div>
      </div>

      <!-- ROW 03 -->
      <div for="parent" class="parent">
        <div class="child">
          <label class="mark" id="7"></label>
        </div>
        <div class="child">
          <label class="mark" id="8"></label>
        </div>
        <div class="child">
          <label class="mark" id="9"></label>
        </div>
      </div>
    </div>

    <script>
      var marks = document.getElementsByClassName("mark"); //Thought this one would be useful :>
      var markContainer = document.getElementsByClassName("child"); //Container of our marks.
      var currentMove = "X"; //Default first move.

      //Extract the contect of our child.
      for (const markCon of markContainer) {
        markCon.onclick = function () {
          markCon.innerHTML = currentMove; //On each click current move will be displayed.
          checkWin(); //Run the function to check if there is a winner already.

          if (currentMove == "X") {
            currentMove = "O";
          } else if (currentMove == "O") {
            currentMove = "X";
          }
        };
      }

      function checkWin() {
        // Store our winning positions
        const winCombination = [
          [0, 1, 2], //[0] = [0][0], [0][1], [0][2]
          [0, 4, 8], //[1] = [1][0], [1][1], [1][2]
          [0, 3, 6], //[2] = [2][0], [2][1], [2][2]
          [3, 4, 5], //[3] = [3][0], [3][1], [3][2]
          [6, 4, 2], //[4] = [4][0], [4][1], [4][2]
          [6, 7, 8], //[5] = [5][0], [5][1], [5][2]
          [1, 4, 7], //[6] = [6][0], [6][1], [6][2]
          [2, 5, 8], //[7] = [7][0], [7][1], [7][2]
        ];
        // console.log(winCombination[5][0]) //debug here!

        //Iterate through 2d Array which contains 7 elements
        //For each iteration "i" represents columns
        for (var i = 0; i < winCombination.length; i++) {
          var firstCol = winCombination[i][0]; //Column 1
          var secondCol = winCombination[i][1]; //Column 2
          var thirdCol = winCombination[i][2]; //Column 3

          //Check if the current move is already exist in every "child"
          if (
            markContainer[firstCol].textContent == currentMove &&
            markContainer[secondCol].textContent == currentMove &&
            markContainer[thirdCol].textContent == currentMove
          ) {
            const title = document.getElementById("title");
            title.innerHTML = "PLAYER '" + currentMove + "' WIN!";

            setTimeout(resetGame, 1800);
          }
        }
      }

      function resetGame() {
        location.reload();
      }
    </script>
  </body>
</html>
